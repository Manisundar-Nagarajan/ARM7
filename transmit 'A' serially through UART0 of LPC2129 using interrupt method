// Write an ECP to transmit 'A' serially through UART0 of LPC2129 using interrupt method and parallely control LED using push button switch.

#include<LPC21XX.H>
#define LED 1<<17
#define SW 14

void UART_Config(void);	 

void UART_ISR(void) __irq
{
int temp;
temp=U0IIR;
U0THR='A';
VICVectAddr=0;
}

int main()
{
IODIR0=LED;

UART_Config();

VICIntSelect=0;
VICVectCntl0=(0x20)|6;
VICVectAddr0=(unsigned long)UART_ISR;
U0IER=1<<1;
VICIntEnable=1<<6;
U0THR='A';

	while(1)
	{
	if(((IOPIN0>>SW)&1)==0)
	IOCLR0=LED;
	else
	IOSET0=LED;
	}
}

void UART_Config(void)
{
PINSEL0 |=0x5;
U0LCR=0x83;
U0DLL=97;
U0DLM=0;
U0LCR=0x03;
}
